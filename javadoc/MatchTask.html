<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (13.0.1) on Tue Jan 14 22:27:52 CET 2020 -->
<title>MatchTask</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-01-14">
<meta name="description" content="declaration: class: MatchTask">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "./";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<h1 title="Class MatchTask" class="title">Class MatchTask</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">MatchTask</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">MatchTask</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">The MatchTask class implements the match between two users. The
 implementation is the following: when the <a href="WQServer.html" title="class in &lt;Unnamed&gt;"><code>WQServer</code></a> executes a
 MatchTask it means that an user challenged one of his friends. After
 performing all the operation's legality checks of the case, such as returning
 an error message if the user is trying to match himslef or an offline friend,
 MatchTask initialize the <code>matchSelector</code> used to read the user's
 translation from their match sockets and sends an UDP invitation message to
 the challenged user containing the nickname of the challenging user and a TCP
 port, i.e. the <code>matchChannel</code>'s socket port, that, if he accepts the
 invitation, must be used to join the match. The invitation time to live is
 implemented by setting a timeout on the <code>invSocket</code>, which is the
 socket used by the task to send the match invitation and then receive the
 response. If the challenged user accept, the match port is communicated to
 the challengig user via its main TCP connection with the WQServer. MatchTask
 then waits for both users to join the match. When both users join the match
 begins. The words are randomly selected from the
 <code>ItalianDictionary.txt</code> file and translated. When the match ends the
 final score of both user is computed and assigned, immediatly after, the
 WQServer's <a href="WQDatabase.html" title="class in &lt;Unnamed&gt;"><code>WQDatabase</code></a> instance is serializaed to save the changes.
 
 <p>
 If an user correctly translates a word he is assigned 2 points, if he doesn't
 he is assigned a score of -1 and if he skips the word he is assigned 0
 points.
 
 <p>
 When the match times out or both users have made an attempt in translating
 all of the words the scores are assigned. If the match times out the
 remaining translations sent by the users are discarded and 0 is assigned for
 every missing translation to both users score. The match bonus assigned to
 the winner consists in 3 points.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(WQDatabase,java.util.concurrent.ConcurrentHashMap,java.util.concurrent.ConcurrentHashMap,java.nio.channels.Selector,java.nio.channels.SelectionKey,java.lang.String,int,int,int)">MatchTask</a></span>&#8203;(<a href="WQDatabase.html" title="class in &lt;Unnamed&gt;">WQDatabase</a>&nbsp;datab,
java.util.concurrent.ConcurrentHashMap&lt;java.lang.Integer,&#8203;java.lang.String&gt;&nbsp;onlineu,
java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,&#8203;java.net.InetSocketAddress&gt;&nbsp;maddr,
java.nio.channels.Selector&nbsp;sel,
java.nio.channels.SelectionKey&nbsp;selk,
java.lang.String&nbsp;frnd,
int&nbsp;n,
int&nbsp;m,
int&nbsp;l)</code></th>
<td class="colLast">
<div class="block">Returns a new MatchTask.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(WQDatabase,java.util.concurrent.ConcurrentHashMap,java.util.concurrent.ConcurrentHashMap,java.nio.channels.Selector,java.nio.channels.SelectionKey,java.lang.String,int,int,int)">MatchTask</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">MatchTask</span>&#8203;(<span class="arguments"><a href="WQDatabase.html" title="class in &lt;Unnamed&gt;">WQDatabase</a>&nbsp;datab,
java.util.concurrent.ConcurrentHashMap&lt;java.lang.Integer,&#8203;java.lang.String&gt;&nbsp;onlineu,
java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,&#8203;java.net.InetSocketAddress&gt;&nbsp;maddr,
java.nio.channels.Selector&nbsp;sel,
java.nio.channels.SelectionKey&nbsp;selk,
java.lang.String&nbsp;frnd,
int&nbsp;n,
int&nbsp;m,
int&nbsp;l)</span></div>
<div class="block">Returns a new MatchTask.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datab</code> - the database.</dd>
<dd><code>onlineu</code> - the list of online users.</dd>
<dd><code>maddr</code> - the list of online users UDP addresses.</dd>
<dd><code>sel</code> - the selector.</dd>
<dd><code>selk</code> - the selection key of interest.</dd>
<dd><code>frnd</code> - the friend to challenge.</dd>
<dd><code>n</code> - the match legth.</dd>
<dd><code>m</code> - the invite duration.</dd>
<dd><code>l</code> - the number of words.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="run()">run</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">run</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
